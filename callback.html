<!DOCTYPE html>
<html>
  <head>
    <title>OAuth Callback</title>
  </head>
  <body>
    <script>
      const search = window.location.search;
      const queryParams = new URLSearchParams(window.location.search);
      const accessToken = queryParams.get("accessToken");
      const refreshToken = queryParams.get("refreshToken");
      const newUser = queryParams.get("isNewUser");
      if (window.opener) {
        window.opener.postMessage(
          {
            type: "oauth-success",
            accessToken: accessToken,
            refreshToken: refreshToken,
            newUser: newUser === "true",
          },
          "*"
        );
        window.close();
      }
    </script>
  </body>
</html>
